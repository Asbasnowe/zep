time="2023-10-29T21:49:38-07:00" level=info msg="Starting Zep server version 0.16.1-6b780c7 (2023-10-29T21:36:50-0700)"
time="2023-10-29T21:49:38-07:00" level=info msg="vector extension version is >= 0.5.0. hnsw indexing available"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[5.565958ms]: CREATE TABLE IF NOT EXISTS \"document_collection\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"name\" VARCHAR NOT NULL, \"description\" VARCHAR NOT NULL, \"metadata\" jsonb, \"table_name\" VARCHAR NOT NULL, \"embedding_model_name\" VARCHAR NOT NULL, \"embedding_dimensions\" BIGINT NOT NULL, \"is_auto_embedded\" BOOLEAN NOT NULL, \"distance_function\" VARCHAR NOT NULL, \"is_normalized\" BOOLEAN NOT NULL, \"is_indexed\" BOOLEAN NOT NULL, \"index_type\" VARCHAR NOT NULL, \"list_count\" BIGINT NOT NULL, \"probe_count\" BIGINT NOT NULL, \"document_count\" BIGINT, \"document_embedded_count\" BIGINT, PRIMARY KEY (\"uuid\"), UNIQUE (\"name\"))"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.22325ms]: CREATE INDEX IF NOT EXISTS \"document_collection_name_idx\" ON \"document_collection\" (\"name\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[3.773792ms]: CREATE TABLE IF NOT EXISTS \"users\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"id\" BIGSERIAL, \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"user_id\" VARCHAR NOT NULL, \"email\" VARCHAR, \"first_name\" VARCHAR, \"last_name\" VARCHAR, \"metadata\" jsonb, PRIMARY KEY (\"uuid\"), UNIQUE (\"user_id\"))"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.880083ms]: CREATE INDEX IF NOT EXISTS \"user_user_id_idx\" ON \"users\" (\"user_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.784959ms]: CREATE INDEX IF NOT EXISTS \"user_email_idx\" ON \"users\" (\"email\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[2.982375ms]: CREATE TABLE IF NOT EXISTS \"session\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"id\" BIGSERIAL, \"session_id\" VARCHAR NOT NULL, \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"metadata\" jsonb, \"user_id\" VARCHAR, PRIMARY KEY (\"uuid\"), UNIQUE (\"session_id\"), FOREIGN KEY (\"user_id\") REFERENCES \"users\" (\"user_id\") ON UPDATE NO ACTION ON DELETE CASCADE)"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.25025ms]: CREATE INDEX IF NOT EXISTS \"session_session_id_idx\" ON \"session\" (\"session_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.24225ms]: CREATE INDEX IF NOT EXISTS \"session_user_id_idx\" ON \"session\" (\"user_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[3.273875ms]: CREATE TABLE IF NOT EXISTS \"message\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"id\" BIGSERIAL, \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"session_id\" VARCHAR NOT NULL, \"role\" VARCHAR NOT NULL, \"content\" VARCHAR NOT NULL, \"token_count\" BIGINT NOT NULL, \"metadata\" jsonb, PRIMARY KEY (\"uuid\"), FOREIGN KEY (\"session_id\") REFERENCES \"session\" (\"session_id\") ON UPDATE NO ACTION ON DELETE CASCADE)"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[964.167µs]: CREATE INDEX IF NOT EXISTS \"memstore_session_id_idx\" ON \"message\" (\"session_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[870.709µs]: CREATE INDEX IF NOT EXISTS \"memstore_id_idx\" ON \"message\" (\"id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[2.945875ms]: CREATE TABLE IF NOT EXISTS \"summary\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"session_id\" VARCHAR NOT NULL, \"content\" VARCHAR, \"metadata\" jsonb, \"token_count\" BIGINT NOT NULL, \"summary_point_uuid\" uuid NOT NULL, PRIMARY KEY (\"uuid\"), UNIQUE (\"summary_point_uuid\"), FOREIGN KEY (\"session_id\") REFERENCES \"session\" (\"session_id\") ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (\"summary_point_uuid\") REFERENCES \"message\" (\"uuid\") ON UPDATE NO ACTION ON DELETE CASCADE)"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.032791ms]: CREATE INDEX IF NOT EXISTS \"sumstore_session_id_idx\" ON \"summary\" (\"session_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[5.040833ms]: CREATE TABLE IF NOT EXISTS \"summary_embedding\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"session_id\" VARCHAR NOT NULL, \"summary_uuid\" uuid NOT NULL, \"embedding\" vector(1536), \"is_embedded\" bool NOT NULL DEFAULT false, PRIMARY KEY (\"uuid\"), UNIQUE (\"summary_uuid\"), FOREIGN KEY (\"summary_uuid\") REFERENCES \"summary\" (\"uuid\") ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (\"session_id\") REFERENCES \"session\" (\"session_id\") ON UPDATE NO ACTION ON DELETE CASCADE)"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[880.917µs]: CREATE INDEX IF NOT EXISTS \"sumvecstore_session_id_idx\" ON \"summary_embedding\" (\"session_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[2.9535ms]: CREATE TABLE IF NOT EXISTS \"message_embedding\" (\"uuid\" uuid NOT NULL DEFAULT gen_random_uuid(), \"created_at\" timestamptz NOT NULL DEFAULT current_timestamp, \"updated_at\" timestamptz DEFAULT current_timestamp, \"deleted_at\" timestamptz, \"session_id\" VARCHAR NOT NULL, \"message_uuid\" uuid NOT NULL, \"embedding\" vector(1536), \"is_embedded\" bool NOT NULL DEFAULT false, PRIMARY KEY (\"uuid\"), UNIQUE (\"message_uuid\"), FOREIGN KEY (\"session_id\") REFERENCES \"session\" (\"session_id\") ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (\"message_uuid\") REFERENCES \"message\" (\"uuid\") ON UPDATE NO ACTION ON DELETE CASCADE)"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[1.018459ms]: CREATE INDEX IF NOT EXISTS \"mem_vec_store_session_id_idx\" ON \"message_embedding\" (\"session_id\")"
time="2023-10-29T21:49:38-07:00" level=debug msg="SELECT[696.083µs]: SELECT atttypmod FROM \"pg_attribute\" WHERE (attrelid = 'message_embedding'::regclass) AND (attname = 'embedding')"
time="2023-10-29T21:49:38-07:00" level=debug msg="SELECT[264.209µs]: SELECT atttypmod FROM \"pg_attribute\" WHERE (attrelid = 'summary_embedding'::regclass) AND (attname = 'embedding')"
time="2023-10-29T21:49:38-07:00" level=info msg="creating hnsw index on message_embedding.embedding if it does not exist"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[859.708µs]: CREATE INDEX CONCURRENTLY IF NOT EXISTS message_embedding_embedding_hnsw_idx ON \"message_embedding\" USING hnsw (\"embedding\" vector_cosine_ops) WITH (M = 16, ef_construction = 64);"
time="2023-10-29T21:49:38-07:00" level=info msg="created hnsw index successfully on message_embedding.embedding if it did not exist"
time="2023-10-29T21:49:38-07:00" level=info msg="creating hnsw index on summary_embedding.embedding if it does not exist"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE[905.791µs]: CREATE INDEX CONCURRENTLY IF NOT EXISTS summary_embedding_embedding_hnsw_idx ON \"summary_embedding\" USING hnsw (\"embedding\" vector_cosine_ops) WITH (M = 16, ef_construction = 64);"
time="2023-10-29T21:49:38-07:00" level=info msg="created hnsw index successfully on summary_embedding.embedding if it did not exist"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[3.486541ms]: CREATE TABLE IF NOT EXISTS bun_migrations (\"id\" BIGSERIAL NOT NULL, \"name\" VARCHAR, \"group_id\" BIGINT, \"migrated_at\" TIMESTAMPTZ NOT NULL DEFAULT current_timestamp, PRIMARY KEY (\"id\"))"
time="2023-10-29T21:49:38-07:00" level=debug msg="CREATE TABLE[2.781375ms]: CREATE TABLE IF NOT EXISTS bun_migration_locks (\"id\" BIGSERIAL NOT NULL, \"table_name\" VARCHAR, PRIMARY KEY (\"id\"), UNIQUE (\"table_name\"))"
time="2023-10-29T21:49:38-07:00" level=debug msg="INSERT[653µs]: INSERT INTO bun_migration_locks (\"id\", \"table_name\") VALUES (DEFAULT, 'bun_migrations') RETURNING \"id\""
time="2023-10-29T21:49:38-07:00" level=debug msg="SELECT[276.708µs]: SELECT * FROM bun_migrations"
time="2023-10-29T21:49:38-07:00" level=debug msg="INSERT[483.708µs]: INSERT INTO bun_migrations (\"id\", \"name\", \"group_id\", \"migrated_at\") VALUES (DEFAULT, '20230822100800', 1, DEFAULT) RETURNING \"id\", \"migrated_at\""
time="2023-10-29T21:49:38-07:00" level=debug msg="DO[4.303292ms]: DO $$\nBEGIN\n    IF NOT EXISTS(\n        SELECT\n            1\n        FROM\n            information_schema.columns\n        WHERE\n            table_name = 'session'\n            AND column_name = 'user_id') THEN\n    ALTER TABLE session\n        ADD COLUMN user_id UUID;\nEND IF;\nEND\n$$;\n\n"
time="2023-10-29T21:49:38-07:00" level=debug msg="DO[925.416µs]: DO $$\nBEGIN\n    IF NOT EXISTS(\n        SELECT\n            1\n        FROM\n            pg_indexes\n        WHERE\n            tablename = 'session'\n            AND indexname = 'session_user_id_idx') THEN\n    CREATE INDEX session_user_id_idx ON session(user_id);\nEND IF;\nEND\n$$;\n\n"
time="2023-10-29T21:49:38-07:00" level=debug msg="DO[1.673791ms]: DO $$\nBEGIN\n    IF NOT EXISTS(\n        SELECT\n            1\n        FROM\n            information_schema.columns\n        WHERE\n            table_name = 'session'\n            AND column_name = 'id') THEN\n    ALTER TABLE session\n        ADD COLUMN id BIGSERIAL;\nEND IF;\nEND\n$$;\n\n"
time="2023-10-29T21:49:38-07:00" level=debug msg="INSERT[392.166µs]: INSERT INTO bun_migrations (\"id\", \"name\", \"group_id\", \"migrated_at\") VALUES (DEFAULT, '2023092800', 1, DEFAULT) RETURNING \"id\", \"migrated_at\""
time="2023-10-29T21:49:38-07:00" level=debug msg="ALTER[525.625µs]: ALTER TABLE document_collection\n    ADD COLUMN IF NOT EXISTS index_type text;\n\nUPDATE document_collection\n    SET index_type = 'ivfflat'\n    WHERE index_type IS NULL;\n\n"
time="2023-10-29T21:49:38-07:00" level=info msg="migrated to group #1 (20230822100800_add_user_uuid_to_session_schema, 2023092800_add_index_type_to_collection_schema)\n"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[433.334µs]: DELETE FROM bun_migration_locks WHERE (\"table_name\" = 'bun_migrations')"
time="2023-10-29T21:49:38-07:00" level=debug msg="memoryStore created"
time="2023-10-29T21:49:38-07:00" level=debug msg="documentStore created"
time="2023-10-29T21:49:38-07:00" level=debug msg="userStore created"
time="2023-10-29T21:49:38-07:00" level=info msg="Using memory store: postgres"
time="2023-10-29T21:49:38-07:00" level=debug msg="RunTaskRouter called"
time="2023-10-29T21:49:38-07:00" level=debug msg="Adding middleware" count=4
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing tasks"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_summarizer topic=message_summarizer
time="2023-10-29T21:49:38-07:00" level=info msg="message_summarizer task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_embedder topic=message_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="message_embedder task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_ner topic=message_ner
time="2023-10-29T21:49:38-07:00" level=info msg="message_ner task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_intent topic=message_intent
time="2023-10-29T21:49:38-07:00" level=info msg="message_intent task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_token_count topic=message_token_count
time="2023-10-29T21:49:38-07:00" level=info msg="message_token_count task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=document_embedder topic=document_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="document_embedder task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="Adding handler" handler_name=message_summary_embedder topic=message_summary_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="message_summary_embedder task added to task router"
time="2023-10-29T21:49:38-07:00" level=info msg="running task router"
time="2023-10-29T21:49:38-07:00" level=debug msg="Loading plugins"
time="2023-10-29T21:49:38-07:00" level=info msg="Running router handlers" count=7
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_summarizer topic=message_summarizer
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_summarizer\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_summarizer\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE00DDKQ0KTPRRN1TSN
time="2023-10-29T21:49:38-07:00" level=info msg="Starting purge delete processor. Purging every 1h0m0s"
time="2023-10-29T21:49:38-07:00" level=info msg="Web interface enabled"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging memory store"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging schema *postgres.MessageVectorStoreSchema"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[398.834µs]: DELETE FROM \"message_embedding\" AS \"me\" WHERE \"me\".\"deleted_at\" IS NOT NULL"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging schema *postgres.SummaryVectorStoreSchema"
time="2023-10-29T21:49:38-07:00" level=info msg="Listening on: 0.0.0.0:8000"
time="2023-10-29T21:49:38-07:00" level=info msg="Web UI available at: 0.0.0.0:8000/admin"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[322.791µs]: DELETE FROM \"summary_embedding\" AS \"se\" WHERE \"se\".\"deleted_at\" IS NOT NULL"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging schema *postgres.SummaryStoreSchema"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[290.375µs]: DELETE FROM \"summary\" AS \"su\" WHERE \"su\".\"deleted_at\" IS NOT NULL"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging schema *postgres.MessageStoreSchema"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[285.834µs]: DELETE FROM \"message\" AS \"m\" WHERE \"m\".\"deleted_at\" IS NOT NULL"
time="2023-10-29T21:49:38-07:00" level=debug msg="purging schema *postgres.SessionSchema"
time="2023-10-29T21:49:38-07:00" level=debug msg="DELETE[337.583µs]: DELETE FROM \"session\" AS \"s\" WHERE \"s\".\"deleted_at\" IS NOT NULL"
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_embedder topic=message_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_summarizer topic=message_summarizer
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_embedder\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_embedder\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE0M6VJTJZEQZCME0A0
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_ner topic=message_ner
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_ner\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_ner\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE0XMQVJ6KFA44S5T5W
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_embedder topic=message_embedder
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_intent topic=message_intent
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_intent\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_intent\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE0G8KDT2VATSVZ7XPC
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_ner topic=message_ner
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_token_count topic=message_token_count
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_token_count\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_token_count\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE0QD8PTN7JKJ2ZZNVA
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_intent topic=message_intent
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=document_embedder topic=document_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_document_embedder\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_document_embedder\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE09MJX6K47S2B41C4D
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_token_count topic=message_token_count
time="2023-10-29T21:49:38-07:00" level=debug msg="Subscribing to topic" subscriber_name=message_summary_embedder topic=message_summary_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="Initializing subscriber schema" query="[ \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_message_summary_embedder\" (\n\t\t\t\"offset\" SERIAL,\n\t\t\t\"uuid\" VARCHAR(36) NOT NULL,\n\t\t\t\"created_at\" TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n\t\t\t\"payload\" JSON DEFAULT NULL,\n\t\t\t\"metadata\" JSON DEFAULT NULL,\n\t\t\t\"transaction_id\" xid8 NOT NULL,\n\t\t\tPRIMARY KEY (\"transaction_id\", \"offset\")\n\t\t);\n\t \n\t\tCREATE TABLE IF NOT EXISTS \"watermill_offsets_message_summary_embedder\" (\n\t\tconsumer_group VARCHAR(255) NOT NULL,\n\t\toffset_acked BIGINT,\n\t\tlast_processed_transaction_id xid8 NOT NULL,\n\t\tPRIMARY KEY(consumer_group)\n\t)]" subscriber_id=01HDZEMZE06HH3Z361DVE9B0R7
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=document_embedder topic=document_embedder
time="2023-10-29T21:49:38-07:00" level=info msg="Starting handler" subscriber_name=message_summary_embedder topic=message_summary_embedder
time="2023-10-29T21:49:38-07:00" level=debug msg="VACUUM[56.093625ms]: VACUUM ANALYZE"
time="2023-10-29T21:49:38-07:00" level=info msg="completed purging store"
time="2023-10-29T21:49:40-07:00" level=debug msg="SELECT[4.043375ms]: SELECT \"dc\".\"uuid\", \"dc\".\"created_at\", \"dc\".\"updated_at\", \"dc\".\"name\", \"dc\".\"description\", \"dc\".\"metadata\", \"dc\".\"table_name\", \"dc\".\"embedding_model_name\", \"dc\".\"embedding_dimensions\", \"dc\".\"is_auto_embedded\", \"dc\".\"distance_function\", \"dc\".\"is_normalized\", \"dc\".\"is_indexed\", \"dc\".\"index_type\", \"dc\".\"list_count\", \"dc\".\"probe_count\", \"dc\".\"document_count\", \"dc\".\"document_embedded_count\" FROM \"document_collection\" AS \"dc\" WHERE (name = 'test3e22f0f4971c46ac9d9d45d55ea0c5bc')"
time="2023-10-29T21:49:40-07:00" level=error msg="failed to get collection: failed to get collection: collection: test3e22f0f4971c46ac9d9d45d55ea0c5bc not found"
time="2023-10-29T21:49:40-07:00" level=info msg="http://localhost:8000/admin/collections/test3e22f0f4971c46ac9d9d45d55ea0c5bc" bytes=25 category=router duration=5127625 duration_display=5.128208ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=404
time="2023-10-29T21:49:40-07:00" level=debug msg="SELECT[2.581666ms]: SELECT \"dc\".\"uuid\", \"dc\".\"created_at\", \"dc\".\"updated_at\", \"dc\".\"name\", \"dc\".\"description\", \"dc\".\"metadata\", \"dc\".\"table_name\", \"dc\".\"embedding_model_name\", \"dc\".\"embedding_dimensions\", \"dc\".\"is_auto_embedded\", \"dc\".\"distance_function\", \"dc\".\"is_normalized\", \"dc\".\"is_indexed\", \"dc\".\"index_type\", \"dc\".\"list_count\", \"dc\".\"probe_count\", \"dc\".\"document_count\", \"dc\".\"document_embedded_count\" FROM \"document_collection\" AS \"dc\" WHERE (name = 'test3e22f0f4971c46ac9d9d45d55ea0c5bc')"
time="2023-10-29T21:49:40-07:00" level=error msg="failed to get collection: failed to get collection: collection: test3e22f0f4971c46ac9d9d45d55ea0c5bc not found"
time="2023-10-29T21:49:40-07:00" level=info msg="http://localhost:8000/admin/collections/test3e22f0f4971c46ac9d9d45d55ea0c5bc" bytes=25 category=router duration=2964666 duration_display=2.965208ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=404
time="2023-10-29T21:49:41-07:00" level=debug msg="SELECT[15.400666ms]: SELECT \"document_collection\".\"uuid\", \"document_collection\".\"created_at\", \"document_collection\".\"updated_at\", \"document_collection\".\"name\", \"document_collection\".\"description\", \"document_collection\".\"metadata\", \"document_collection\".\"table_name\", \"document_collection\".\"embedding_model_name\", \"document_collection\".\"embedding_dimensions\", \"document_collection\".\"is_auto_embedded\", \"document_collection\".\"distance_function\", \"document_collection\".\"is_normalized\", \"document_collection\".\"is_indexed\", \"document_collection\".\"index_type\", \"document_collection\".\"list_count\", \"document_collection\".\"probe_count\", \"document_collection\".\"document_count\", \"document_collection\".\"document_embedded_count\" FROM document_collection"
time="2023-10-29T21:49:41-07:00" level=info msg="http://localhost:8000/admin/collections" bytes=2334 category=router duration=23969166 duration_display=23.969666ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:41-07:00" level=info msg="http://localhost:8000/static/zep-name-logo.svg" bytes=201823 category=router duration=36717000 duration_display=36.717375ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=debug msg="SELECT[2.946042ms]: SELECT \"document_collection\".\"uuid\", \"document_collection\".\"created_at\", \"document_collection\".\"updated_at\", \"document_collection\".\"name\", \"document_collection\".\"description\", \"document_collection\".\"metadata\", \"document_collection\".\"table_name\", \"document_collection\".\"embedding_model_name\", \"document_collection\".\"embedding_dimensions\", \"document_collection\".\"is_auto_embedded\", \"document_collection\".\"distance_function\", \"document_collection\".\"is_normalized\", \"document_collection\".\"is_indexed\", \"document_collection\".\"index_type\", \"document_collection\".\"list_count\", \"document_collection\".\"probe_count\", \"document_collection\".\"document_count\", \"document_collection\".\"document_embedded_count\" FROM document_collection"
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/admin/collections" bytes=5739 category=router duration=12798041 duration_display=12.798375ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/js/dark-mode.js" bytes=733 category=router duration=4683916 duration_display=4.684375ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/output.css" bytes=7306 category=router duration=6140375 duration_display=6.140583ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/js/htmx.min.js" bytes=14870 category=router duration=9883708 duration_display=9.884ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/preline/preline.js" bytes=13411 category=router duration=9322500 duration_display=9.32275ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/js/alpinejs-3.13.0.min.js" bytes=15524 category=router duration=9171875 duration_display=9.172209ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/zep-name-logo.svg" bytes=201823 category=router duration=25508291 duration_display=25.508666ms method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
time="2023-10-29T21:49:47-07:00" level=info msg="http://localhost:8000/static/favicon.png" bytes=3324 category=router duration=117542 duration_display="117.667µs" method=GET proto=HTTP/1.1 remote_ip="::1" status_code=200
